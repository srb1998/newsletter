<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>Email Subscription</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto|Courgette|Pacifico:400,700"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

    <style>
      body {
        color: #000;
        background: #fcda2e;
        font-family: "Roboto", sans-serif;
      }
      .contact-form {
        padding: 50px;
        margin: 30px auto;
      }
      .contact-form h1 {
        font-size: 42px;
        font-family: "Pacifico", sans-serif;
        margin: 0 0 50px;
        text-align: center;
      }
      .contact-form .form-group {
        margin-bottom: 20px;
      }
      .contact-form .form-control,
      .contact-form .btn {
        min-height: 40px;
        border-radius: 2px;
      }
      .contact-form .form-control {
        border-color: #e2c705;
      }
      .contact-form .form-control:focus {
        border-color: #d8b012;
        box-shadow: 0 0 8px #dcae10;
      }
      .contact-form .btn-primary,
      .contact-form .btn-primary:active {
        min-width: 250px;
        color: #fcda2e;
        background: #000 !important;
        margin-top: 20px;
        border: none;
      }
      .contact-form .btn-primary:hover {
        color: #fff;
      }
      .contact-form .btn-primary i {
        margin-right: 5px;
      }
      .contact-form label {
        opacity: 0.9;
      }
      .contact-form textarea {
        resize: vertical;
      }
      .bs-example {
        margin: 20px;
      }
    </style>
  </head>
  <body>
    <div class="container-lg">
      <div class="row">
        <div class="col-md-8 mx-auto">
          <div id="signup" class="contact-form">
            <h1>Get xkcd comic</h1>
            <form action="/subscribe" method="post">
              <div class="row">
                <div class="col-sm-6">
                  <div class="form-group">
                    <label for="inputName">Name</label>
                    <input
                      type="text"
                      class="form-control"
                      id="name"
                      name="name"
                      placeholder="Enter your name"
                      required
                    />
                  </div>
                </div>
                <div class="col-sm-6">
                  <div class="form-group">
                    <label for="inputEmail">Email</label>
                    <input
                      type="email"
                      class="form-control"
                      name="email"
                      id="email"
                      placeholder="Enter your email"
                      required
                      pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"
                    />
                  </div>
                </div>
              </div>

              <div class="text-center">
                <button type="submit" class="btn btn-primary" id="sub">
                  <i class="fa fa-paper-plane"></i> Send
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <script>
              // form submission

      let sub = document.getElementById("#sub");
      let email = document.getElementById("#email");
      let error = document.getElementById("error");
      let signup = document.getElementById("signup");

      sub.addEventListener("click", (event) => {
        event.preventDefault();

        if (this.email.value == null || this.email.value == "") {
          error.classList.add("errorAnim");
        }else {
            let fetchData = {
                method ='post',
                body: JSON.stringify({email:this.email.value}),
                headers: {"Content-Type":"application/json"}
            }

             fetch('/subscribe',fetchData)
             .then(res =>{
              if (response.statusCode === 200) {
                console.log("success");
            } else {

             }
            })
        }
      });
    </script>
  </body>
</html>
